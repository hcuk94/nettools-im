{%- assign privacy = page.privacy | default: 'browser' -%}
{%- assign services = page.third_party_services | default: page.thirdPartyServices | default: nil -%}

<section class="privacy-section" aria-label="Privacy">
  <div class="results-header" style="margin-top: 1.25rem;">
    <h3 style="margin:0;">Privacy</h3>
    <span class="results-info" style="display:flex; align-items:center; gap:0.5rem;">
      {%- if privacy == 'browser' -%}
        <span class="privacy-shield privacy-shield--browser" title="Runs entirely in your browser">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M12 2l7 4v6c0 5-3 9-7 10-4-1-7-5-7-10V6l7-4z"/>
            <path d="M9 12l2 2 4-5"/>
          </svg>
        </span>
        <span>Runs entirely in your browser</span>
      {%- else -%}
        <span class="privacy-shield privacy-shield--thirdparty" title="Uses external services">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M12 2l7 4v6c0 5-3 9-7 10-4-1-7-5-7-10V6l7-4z"/>
            <path d="M12 8v5"/>
            <path d="M12 16h0" stroke-width="3" stroke-linecap="round"/>
          </svg>
        </span>
        <span>Uses external services</span>
      {%- endif -%}
    </span>
  </div>

  <div class="summary-card" style="margin-top: 0.75rem;">
    {%- if privacy == 'browser' -%}
      <p style="margin:0; color: var(--text-secondary); font-size: 0.95rem;">
        This tool runs entirely in your browser. Your inputs are not sent to a server.
      </p>
    {%- else -%}
      <p style="margin:0; color: var(--text-secondary); font-size: 0.95rem;">
        This tool relies on external services to produce results. Inputs may be sent to a backend API and/or third‑party providers.
      </p>

      {%- if services and services.size > 0 -%}
        <div style="margin-top: 0.75rem;">
          <div style="color: var(--text-muted); font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.25rem;">Third‑party services used</div>
          <ul style="margin: 0 0 0 1.25rem; color: var(--text-secondary); font-size: 0.95rem;">
            {%- for s in services -%}
              <li>{{ s }}</li>
            {%- endfor -%}
          </ul>
        </div>
      {%- endif -%}
    {%- endif -%}
  </div>
</section>
